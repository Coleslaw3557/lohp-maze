<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit Theme</title>
</head>
<body>
    <h1>Edit Theme: {{ theme_name }}</h1>
    <form id="editThemeForm">
        <label for="duration">Duration (seconds): <span id="duration-value">{{ theme.duration }}</span></label>
        <input type="range" id="duration" name="duration" min="1" max="3600" step="1" value="{{ theme.duration }}" oninput="updateSliderValue('duration')"><br><br>
        
        <label for="transition_speed">Transition Speed: <span id="transition_speed-value">{{ theme.transition_speed }}</span></label>
        <input type="range" id="transition_speed" name="transition_speed" min="0" max="1" step="0.01" value="{{ theme.transition_speed }}" oninput="updateSliderValue('transition_speed')"><br><br>
        
        <label for="color_variation">Color Variation: <span id="color_variation-value">{{ theme.color_variation }}</span></label>
        <input type="range" id="color_variation" name="color_variation" min="0" max="1" step="0.01" value="{{ theme.color_variation }}" oninput="updateSliderValue('color_variation')"><br><br>
        
        <label for="intensity_fluctuation">Intensity Fluctuation: <span id="intensity_fluctuation-value">{{ theme.intensity_fluctuation }}</span></label>
        <input type="range" id="intensity_fluctuation" name="intensity_fluctuation" min="0" max="1" step="0.01" value="{{ theme.intensity_fluctuation }}" oninput="updateSliderValue('intensity_fluctuation')"><br><br>
        
        <label for="overall_brightness">Overall Brightness: <span id="overall_brightness-value">{{ theme.overall_brightness }}</span></label>
        <input type="range" id="overall_brightness" name="overall_brightness" min="0" max="1" step="0.01" value="{{ theme.overall_brightness }}" oninput="updateSliderValue('overall_brightness')"><br><br>
        
        <label for="green_blue_balance">Green-Blue Balance: <span id="green_blue_balance-value">{{ theme.green_blue_balance }}</span></label>
        <input type="range" id="green_blue_balance" name="green_blue_balance" min="0" max="1" step="0.01" value="{{ theme.green_blue_balance }}" oninput="updateSliderValue('green_blue_balance')"><br><br>
        
        <input type="hidden" id="frequency" name="frequency" value="40">

        <input type="submit" value="Update Theme">
    </form>

    <script>
    function updateSliderValue(id) {
        var slider = document.getElementById(id);
        var output = document.getElementById(id + "-value");
        output.innerHTML = slider.value;
    }

    document.getElementById('editThemeForm').addEventListener('submit', function(e) {
        e.preventDefault();
        var formData = new FormData(this);
        fetch('{{ url_for('edit_theme', theme_name=theme_name) }}', {
            method: 'POST',
            body: formData
        })
        .then(response => response.json())
        .then(data => {
            if (data.status === 'success') {
                alert(data.message);
                window.location.href = '{{ url_for('themes') }}';
            } else {
                alert('Error updating theme: ' + data.message);
            }
        })
        .catch(error => {
            console.error('Error:', error);
            alert('An error occurred while updating the theme');
        });
    });
    </script>
    
    <a href="{{ url_for('themes') }}">Back to Themes</a>
</body>
</html>
